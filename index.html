<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>فاتورة العملاء</title>
  <style>
    body {
      font-family: "Tahoma", sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f6fa;
      color: #333;
    }
    header {
      display: flex;
      justify-content: space-between;
      padding: 15px;
      gap: 10px;
    }
    .box {
      flex: 1;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      font-weight: bold;
      font-size: 18px;
      color: #fff;
    }
    .total { background: #3498db; }      /* أزرق */
    .paid { background: #2ecc71; }       /* أخضر */
    .remain { background: #e74c3c; }     /* أحمر */
    
    table {
      width: 95%;
      margin: 10px auto;
      border-collapse: collapse;
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    th, td {
      padding: 10px;
      border-bottom: 1px solid #ddd;
      text-align: center;
    }
    th {
      background: #f1f1f1;
    }
    tfoot td {
      font-weight: bold;
      background: #fafafa;
    }
    .actions {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 15px;
    }
    button {
      padding: 12px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    .add { background: #2980b9; color: #fff; }
    .pay { background: #27ae60; color: #fff; }
  </style>
</head>
<body>

  <!-- المربعات العلوية -->
  <header>
    <div class="box total">إجمالي: <span id="total">0</span> ج.م</div>
    <div class="box paid">مدفوع: <span id="paid">0</span> ج.م</div>
    <div class="box remain">متبقي: <span id="remain">0</span> ج.م</div>
  </header>

  <!-- جدول الفاتورة -->
  <table id="invoiceTable">
    <thead>
      <tr>
        <th>العدد</th>
        <th>الصنف</th>
        <th>سعر الوحدة</th>
        <th>الإجمالي</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr>
        <td colspan="3">الإجمالي الكلي</td>
        <td id="grandTotal">0</td>
      </tr>
    </tfoot>
  </table>

  <!-- الأزرار -->
  <div class="actions">
    <button class="add" onclick="addItem()">➕ إضافة صنف</button>
    <button class="pay" onclick="addPayment()">💳 تسجيل دفعة</button>
  </div>

  <script>
    let total = 0;
    let paid = 0;

    function updateBoxes() {
      document.getElementById("total").textContent = total;
      document.getElementById("paid").textContent = paid;
      document.getElementById("remain").textContent = total - paid;
      document.getElementById("grandTotal").textContent = total;
    }

    function addItem() {
      const qty = prompt("أدخل العدد:");
      const item = prompt("أدخل اسم الصنف:");
      const price = prompt("أدخل سعر الوحدة:");

      if (!qty || !item || !price) return;

      const row = document.createElement("tr");
      const subtotal = qty * price;

      row.innerHTML = `
        <td>${qty}</td>
        <td>${item}</td>
        <td>${price}</td>
        <td>${subtotal}</td>
      `;

      document.querySelector("#invoiceTable tbody").appendChild(row);

      total += subtotal;
      updateBoxes();
    }

    function addPayment() {
      const amount = prompt("أدخل قيمة الدفعة:");
      if (!amount) return;

      paid += Number(amount);
      updateBoxes();

      const row = document.createElement("tr");
      row.innerHTML = `
        <td colspan="3">💳 دفعة (${new Date().toLocaleDateString()})</td>
        <td>- ${amount}</td>
      `;
      document.querySelector("#invoiceTable tbody").appendChild(row);
    }
  </script>

</body>
</html>
