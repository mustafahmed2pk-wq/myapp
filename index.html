<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
    <title>ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</title>
      <style>
          body { font-family: Arial; direction: rtl; background: #f0f0f0; }
              .header { text-align: center; padding: 10px; }
                  .yellow-box { background: yellow; display:inline-block; padding: 5px 10px; margin:5px; }
                      .blue-box { background: lightblue; display:inline-block; padding: 5px 10px; margin:5px; }
                          .client { border: 1px solid #ccc; margin:10px; padding:10px; background:white; }
                              .item { display:flex; justify-content:space-between; padding:5px; }
                                  .bold { font-weight:bold; font-size:18px; }
                                      .btn { padding:8px 15px; margin:5px; cursor:pointer; }
                                        </style>
                                        </head>
                                        <body>

                                          <div class="header">
                                              <div class="yellow-box"> (ÿµŸÑŸä ÿπŸÑŸâ ÿßŸÑŸÜÿ®Ÿä Ô∑∫) </div>
                                                  <div class="blue-box"> ŸÖÿµÿ∑ŸÅŸâ ÿßÿ≠ŸÖÿØ ŸÖÿ±ÿ™ÿ∂Ÿâ </div>
                                                    </div>

                                                      <button class="btn" onclick="showForm()">‚ûï ÿ•ÿ∂ÿßŸÅÿ© ŸÅÿßÿ™Ÿàÿ±ÿ©</button>

                                                        <div id="form" style="display:none; background:#fff; padding:10px; margin:10px;">
                                                            <h3>ÿ•ÿ∂ÿßŸÅÿ© ÿµŸÜŸÅ</h3>
                                                                <div id="items"></div>
                                                                    <button class="btn" onclick="addItem()">‚ûï ÿ•ÿ∂ÿßŸÅÿ© ÿµŸÜŸÅ ÿ¨ÿØŸäÿØ</button>
                                                                        <hr>
                                                                            <button class="btn" onclick="calculate()">= ÿßÿ≠ÿ≥ÿ®</button>
                                                                                <div id="total" class="bold"></div>
                                                                                    <button class="btn" onclick="saveInvoice()">üíæ ÿ≠ŸÅÿ∏ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©</button>
                                                                                      </div>

                                                                                        <h3>üìã ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ°</h3>
                                                                                          <div id="clients"></div>

                                                                                            <script>
                                                                                                let items = [];
                                                                                                    let clients = JSON.parse(localStorage.getItem("clients") || "[]");

                                                                                                        function showForm() {
                                                                                                              document.getElementById("form").style.display = "block";
                                                                                                                    items = [];
                                                                                                                          document.getElementById("items").innerHTML = "";
                                                                                                                                document.getElementById("total").innerHTML = "";
                                                                                                                                    }

                                                                                                                                        function addItem() {
                                                                                                                                              const id = Date.now();
                                                                                                                                                    items.push({id, name:"", qty:0, price:0});
                                                                                                                                                          renderItems();
                                                                                                                                                              }

                                                                                                                                                                  function renderItems() {
                                                                                                                                                                        const container = document.getElementById("items");
                                                                                                                                                                              container.innerHTML = "";
                                                                                                                                                                                    items.forEach(it => {
                                                                                                                                                                                            container.innerHTML += `
                                                                                                                                                                                                      <div class="item">
                                                                                                                                                                                                                  <input placeholder="ÿßŸÑÿµŸÜŸÅ" onchange="updateItem(${it.id}, 'name', this.value)">
                                                                                                                                                                                                                              <input type="number" placeholder="ÿßŸÑÿπÿØÿØ" onchange="updateItem(${it.id}, 'qty', this.value)">
                                                                                                                                                                                                                                          <input type="number" placeholder="ÿßŸÑÿ≥ÿπÿ±" onchange="updateItem(${it.id}, 'price', this.value)">
                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                            `;
                                                                                                                                                                                                                                                                  });
                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                          function updateItem(id, field, value) {
                                                                                                                                                                                                                                                                                const item = items.find(i => i.id === id);
                                                                                                                                                                                                                                                                                      item[field] = field === "name" ? value : Number(value);
                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                              function calculate() {
                                                                                                                                                                                                                                                                                                    let total = 0;
                                                                                                                                                                                                                                                                                                          items.forEach(it => total += it.qty * it.price);
                                                                                                                                                                                                                                                                                                                document.getElementById("total").innerHTML = "ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä: " + total + " ÿ¨.ŸÖ";
                                                                                                                                                                                                                                                                                                                      return total;
                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                              function saveInvoice() {
                                                                                                                                                                                                                                                                                                                                    const total = calculate();
                                                                                                                                                                                                                                                                                                                                          const client = {
                                                                                                                                                                                                                                                                                                                                                  id: Date.now(),
                                                                                                                                                                                                                                                                                                                                                          items,
                                                                                                                                                                                                                                                                                                                                                                  total,
                                                                                                                                                                                                                                                                                                                                                                          date: new Date().toLocaleString()
                                                                                                                                                                                                                                                                                                                                                                                };
                                                                                                                                                                                                                                                                                                                                                                                      clients.push(client);
                                                                                                                                                                                                                                                                                                                                                                                            localStorage.setItem("clients", JSON.stringify(clients));
                                                                                                                                                                                                                                                                                                                                                                                                  renderClients();
                                                                                                                                                                                                                                                                                                                                                                                                        document.getElementById("form").style.display = "none";
                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                function renderClients() {
                                                                                                                                                                                                                                                                                                                                                                                                                      const container = document.getElementById("clients");
                                                                                                                                                                                                                                                                                                                                                                                                                            container.innerHTML = "";
                                                                                                                                                                                                                                                                                                                                                                                                                                  clients.forEach(c => {
                                                                                                                                                                                                                                                                                                                                                                                                                                          container.innerHTML += `
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <div class="client">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <b>ŸÅÿßÿ™Ÿàÿ±ÿ© ÿ®ÿ™ÿßÿ±ŸäÿÆ:</b> ${c.date}<br>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ${c.items.map(it => `${it.name} - ${it.qty} √ó ${it.price} = ${it.qty*it.price} ÿ¨.ŸÖ`).join("<br>")}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <div class="bold">ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä: ${c.total} ÿ¨.ŸÖ</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      `;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    renderClients();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </html>